# Урок 12. Принципы тестирования приложений

## План-проект тестирования клиентского приложения и облачного сервиса управления устройствами умного дома

См. [План-проект тестирования облачного приложения.pdf](План-проект%20тестирования%20облачного%20приложения.pdf)

## Проект спецификации OpenAPI к API Gateway &mdash; API-шлюзу между клиентским приложением и облачному сервису управления домашними устройствами

*Отличия от REST API облачного сервиса:*

Для повышения безопасности и уменьшения проникновения деталей реализации в
пользовательское (клиентское) простанство:

Вместо синтетических ключей конечной СУБД API Gateway использует:

* для идентификации группы совместного управления используется её порядковый
номер начиная с 1 согласно естественному порядку в БД в списке групп данного
авторизованного пользователя;
* для идентификации устройства вместо синтетического ключа БД используется его
UUID, присваиваемый в момент создания (добавления) записи об устройстве;
* графики работ устройства также идентифицируются по порядковый номеру в разрезе
устройства согласно естественному порядку в БД;
* клиентское приложение и пользователь идентифицируются по токену,
сгенерированному облачным сервисом аутентификации.

См. [openapi3_1__api_gateway.yaml](openapi3_1__api_gateway.yaml)

*Интерактивный просмотр на Swagger.io:*

[https://petstore.swagger.io/?url=https://raw.githubusercontent.com/alexeycoder/gb_arch_hw12_vacuumcleaner_prj/refs/heads/main/openapi3_1__api_gateway.yaml](https://petstore.swagger.io/?url=https://raw.githubusercontent.com/alexeycoder/gb_arch_hw12_vacuumcleaner_prj/refs/heads/main/openapi3_1__api_gateway.yaml)

*Краткое превью*

![openapi3_1__api_gateway_preview](https://github.com/user-attachments/assets/6dc40a35-8632-4943-9e9a-617f45452000)

*Примечания к компонентам OpenAPI:*

`Connection`

Представляет данные для подключения устройства к беспроводной сети пользователя.
Не хранятся в базе сервиса, а только локально на устройстве и в приложении
пользователя. В базе сервиса хранится только идентификатор подключения
в локальном хранилище.

По сути не является компонентом API шлюза, описание добавлено для справки!

`DeviceState`

Представляет основные показатели состояния устройства.
API сервиса позволяет получить состояние устройства удалённо,
когда устройство и клиентское приложение находятся в разных сегментах
(разных сетях).

В обычном случае, когда устройство и клиентское приложение находяся
в одной локальной сети, получение данных о состоянии устройства должно
осуществляться приложением напрямую в обход API сервиса.

*Сгенерированный Java/Spring-код серверного приложения API Gateway*

См. [api-gateway-spring-server/](api-gateway-spring-server)

### Верхнеуровневая схема облачного микросервисного программного продукта

![top-level-cloud-app-arch](https://github.com/user-attachments/assets/dfb4fae4-1aec-4e54-ada0-3421bd1e0e9d)

### Пример проекта вертикального среза приложения &mdash; микро-сервиса аутентификации на базе токенов безопасности (UML диаграмма)

![uml_micro_authentication_service](https://github.com/user-attachments/assets/dd504932-cfd9-4fef-8e8a-25920dc65eb8)

